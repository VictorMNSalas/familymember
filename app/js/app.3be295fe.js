(function(){"use strict";var e={3237:function(e,t,a){var r=a(144),n=a(998),o=a(3059),s=function(){var e=this,t=e._self._c;return t(n.Z,[t(o.Z,[t("HeaderApp"),t("FormDataMembers",{attrs:{leadData:e.leadData,Matter_ID:e.Matter_ID,Matter_Client_Number:e.Matter_Client_Number,id_lead:e.id_lead,familyData:e.familyMembers}})],1)],1)},i=[],l=(a(7658),a(6072)),d=a(4324),c=function(){var e=this,t=e._self._c;return t(l.Z,{attrs:{color:"blue",density:"compact"}},[t("div",{attrs:{id:"header"}},[t("h1",{staticClass:"title"},[e._v("Retainers")]),t(d.Z,{attrs:{id:"close_icon"},on:{click:function(t){return e.closeWisget()}}},[e._v(" "+e._s(e.CloseIcon))])],1)])},m=[],u=a(5317),p={components:{},data(){return{}},computed:{CloseIcon(){return u.UEB}},methods:{closeWisget(){ZOHO.CRM.UI.Popup.close().then((function(e){console.log(e)}))}}},h=p,f=a(1001),D=(0,f.Z)(h,c,m,!1,null,null,null),b=D.exports,_=a(1653),w=a(4562),v=a(4127),C=a(266),g=a(2150),y=a(5125),Z=a(3305),I=a(1713),N=a(9580),M=a(4068),O=function(){var e=this,t=e._self._c;return t(y.Z,{on:{submit:function(e){e.preventDefault()}}},[t(g.Z,{staticClass:"spacing-playground mt-1"},[e.CreatedRecordAlert?t(_.Z,{staticClass:"alert",attrs:{text:"",type:"info",variant:"tonal"}},[e._v("New record have been successfully created in the Cases/Retainers module. ")]):e._e(),e.error?t(_.Z,{staticClass:"alert",attrs:{text:"",type:"error",variant:"tonal"}},[e._v("Erroneous information has been found added in the Fee or Initial Deposit field. ")]):e._e(),e.warning?t(_.Z,{staticClass:"alert",attrs:{text:"",type:"warning",variant:"tonal"}},[e._v("There are unanswered fields, please enter the complete information to proceed Deposit field. ")]):e._e(),e.componentes.length<=0?t("h3",[e._v("To enter new data, please click on the (âž•) button.")]):e._e(),e._l(e.componentes,(function(a,r){return t(I.Z,{key:r,attrs:{id:"row"}},[t(C.Z,{attrs:{cols:"12",md:"2"}},[t(N.Z,{attrs:{label:"Service Type",items:["Immigration","Criminal"]},on:{change:function(t){return e.subDepartmentOptions(t,r)}},model:{value:e.rowData[r].service,callback:function(t){e.$set(e.rowData[r],"service",t)},expression:"rowData[index].service"}})],1),t(C.Z,{attrs:{cols:"12",md:"2"}},[t(N.Z,{attrs:{label:"Sub Department",items:e.rowData[r].Departments},on:{change:function(t){return e.subDepartment(t,r)}},model:{value:e.rowData[r].department,callback:function(t){e.$set(e.rowData[r],"department",t)},expression:"rowData[index].department"}})],1),t(C.Z,{attrs:{cols:"12",md:"2"}},[t(N.Z,{attrs:{label:"Name",items:e.Firstname},on:{change:function(t){return e.setData(t,r)}},model:{value:e.rowData[r].name,callback:function(t){e.$set(e.rowData[r],"name",t)},expression:"rowData[index].name"}})],1),t(C.Z,{attrs:{cols:"12",md:"2"}},[t(M.Z,{attrs:{label:"Phone",counter:12,required:""},model:{value:e.rowData[r].phone,callback:function(t){e.$set(e.rowData[r],"phone",t)},expression:"rowData[index].phone"}})],1),t(C.Z,{attrs:{cols:" 12",md:"2"}},[t(M.Z,{attrs:{label:"Inicial Deposit",rules:e.numeroRules,required:""},model:{value:e.rowData[r].deposit,callback:function(t){e.$set(e.rowData[r],"deposit",t)},expression:"rowData[index].deposit"}})],1),t(C.Z,{attrs:{cols:"12",md:"1"}},[t(M.Z,{attrs:{label:"Fee",required:"",rules:e.numeroRules},model:{value:e.rowData[r].fee,callback:function(t){e.$set(e.rowData[r],"fee",t)},expression:"rowData[index].fee"}})],1),t(C.Z,{staticClass:"d-flex justify-center",attrs:{cols:"1",md:"1"}},[t(d.Z,{attrs:{size:"large",color:"red"},on:{click:function(t){return e.removeItem(r)}}},[e._v("mdi-delete")])],1)],1)})),t("div",{attrs:{id:"btns"}},[t(w.Z,{staticClass:"spacing-playground ma-3",attrs:{size:"x-large"},on:{click:e.duplicarComponente}},[e._v("+")]),t(w.Z,{staticClass:"spacing-playground ma-3",attrs:{size:"x-large",disabled:e.botondisabled},on:{click:e.dataRowGet}},[e.loader?t(Z.Z,{attrs:{indeterminate:"",size:25}}):t("p",[e._v("Submit")])],1)],1)],2),t(v.Z,{staticClass:"ma-10",attrs:{closable:"",color:"blue","text-color":"white","prepend-icon":"mdi-checkbox-marked-circle"}},[e._v(" "+e._s(e.rowsCompletedCount)+"/"+e._s(e.rowsCount)+" Created ")])],1)},x=[],P={props:{familyData:Array,id_lead:String,Matter_Client_Number:Number,Matter_ID:Object,leadData:Array},data(){return{componentes:[],rowData:[],familyInfo:[],formData:[],department:[],phones:[],data:"",CreatedRecordAlert:!1,warning:!1,error:!1,loader:!1,Firstname:"",botondisabled:!0,familyDataCompleted:[],das:[],rowsCount:0,rowsCompletedCount:0}},computed:{numeroRules(){return[e=>!!e||"This field is required",e=>/^[0-9]*$/.test(e)||"Only numbers allowed"]}},methods:{btnSumbitDisabled(){this.rowsCount>0?this.botondisabled=(0,r.iH)(!1):this.botondisabled=(0,r.iH)(!0)},duplicarComponente(){const e="RowForm";this.componentes.push(e),this.rowsCount=(0,r.iH)(this.componentes.length),this.btnSumbitDisabled(),this.rowData.push({service:"",department:"",Departments:[],name:"",phone:"",deposit:"",address:"",fee:"",DepartmentC:"",DepartmentI:""})},removeItem(e){this.componentes.splice(e,1),this.rowData.splice(e,1),this.formData.splice(e,1),this.rowsCount=(0,r.iH)(this.componentes.length),this.btnSumbitDisabled()},getData(){0==this.familyData.length&&(console.log(this.familyData),this.familyData.push([]),console.log(this.familyData)),this.familyData[0].push(this.leadData[0]);let e=[];this.familyData[0].forEach((t=>{let a=t.Firts_Name,r=t.Last_Name,n=t.Address,o=t.Phone,s="";s=""!=r?`${a} ${r}`:`${a}`,e.push(s),this.familyDataCompleted.push({fullName:s,addres:n,phone:o})})),this.Firstname=e},setData(e,t){this.familyDataCompleted.forEach((a=>{a.fullName==e&&(this.rowData[t].phone=a.phone,this.rowData[t].name=a.fullName,this.rowData[t].address=a.addres)}))},subDepartmentOptions(e,t){"Immigration"==e?(this.rowData[t].Departments=[],this.rowData[t].Departments.push("EOIR - Undetained","USCIS - U-Cert","USCIS - Petitions","SIJS","FOIA")):"Criminal"==e&&(this.rowData[t].Departments=[],this.rowData[t].Departments.push("Post Conviction - Pre Filing","Post Conviction - MTV","Post Conviction - Petitions","Post Conviction - Investigations","Post Conviction - Assessments","Misdemeanors","Felonies"))},subDepartment(e,t){"Criminal"==this.rowData[t].service?(this.rowData[t].DepartmentC=e,this.rowData[t].DepartmentI=""):"Immigration"==this.rowData[t].service&&(this.rowData[t].DepartmentI=e,this.rowData[t].DepartmentC="")},dataRowGet(){this.rowData.forEach(((e,t)=>{this.das.push(t,e.name);const a=Number(e.fee),n=Number(e.deposit);if(""!=(e.phone&&e.fee&&e.deposit&&e.name&&e.service&&e.department)){if(12==e.phone.length)if(isNaN(a)||isNaN(n))this.error=(0,r.iH)(!0),setTimeout((()=>{this.error=(0,r.iH)(!1)}),3e3);else{const t={name:e.name,service:e.service,depC:e.DepartmentC,depI:e.DepartmentI,addres:e.address,phone:e.phone,fee:e.fee,deposit:e.deposit};this.formData.push(t)}}else this.warning=(0,r.iH)(!0),setTimeout((()=>{this.warning=(0,r.iH)(!1)}),3e3)})),this.formData.length==this.rowData.length?(console.log("crearan esos"),this.createRecord()):(this.formData=[],console.log("No son iguales"))},async createRecord(){this.loader=(0,r.iH)(!0),this.alertView(),this.formData.forEach(((e,t)=>{t+=1,this.data=e;let a=`${this.Matter_Client_Number} - ${t}`;const n=this;ZOHO.CRM.API.insertRecord({Entity:"Deals",APIData:{Client_Name:this.id_lead,Stage:"Open",Deal_Name:a,Name1:e.name,Matter:this.Matter_ID,Service_Type:e.service,Criminal_Department:e.depC,Immigrant_Department:e.depI,Adress:e.addres,Phone:e.phone,Fee:e.fee,Initial_Deposit:e.deposit}}).then((function(e){console.log(e),n.alertView(e),n.rowsCompletedCount=(0,r.iH)(t)})).catch((function(e){console.error(e)}))}))},alertView(){this.loader=(0,r.iH)(!1),this.CreatedRecordAlert=(0,r.iH)(!0),setTimeout((()=>{this.CreatedRecordAlert=(0,r.iH)(!1),this.deleteData(),ZOHO.CRM.BLUEPRINT.proceed()}),3e3)},deleteData(){this.rowData=[],this.componentes=[],this.familyInfo=[],this.formData=[],this.department=[],this.phones=[],this.data="",this.CreatedRecordAlert=!1,this.warning=!1,this.error=!1,this.loader=!1,this.Firstname="",this.botonDeshabilitado=!0,this.familyDataCompleted=[],this.das=[],this.rowsCompletedCount=(0,r.iH)(0)}},mounted(){setTimeout((()=>{this.getData(),console.log("compoenent montado")}),5e3)}},A=P,R=(0,f.Z)(A,O,x,!1,null,null,null),H=R.exports,S={name:"App",components:{HeaderApp:b,FormDataMembers:H},data:()=>({familyMembers:[],id_lead:"",Matter_Client_Number:"",Matter_ID:"",leadData:[]}),mounted(){ZOHO.embeddedApp.on("PageLoad",(async e=>{const t=e.EntityId,a=e.Entity;this.id_lead=t;const r=await ZOHO.CRM.API.getRecord({Entity:a,RecordID:t});if(r.data[0].Family_Members.length>0){this.familyMembers.push(r.data[0].Family_Members);const e={Firts_Name:r.data[0].Last_Name,Phone:r.data[0].Mobile,Address:r.data[0].Address_Line_1,Last_Name:""};this.leadData.push(e)}else{const e={Firts_Name:r.data[0].Last_Name,Phone:r.data[0].Mobile,Address:r.data[0].Address_Line_1,Last_Name:""};this.leadData.push(e)}this.Matter_Client_Number=r.data[0].Matter_Client_Number,this.Matter_ID=r.data[0].Account_Name})),ZOHO.embeddedApp.init()}},k=S,F=(0,f.Z)(k,s,i,!1,null,null,null),T=F.exports,E=a(1705);r.ZP.use(E.Z);var $=new E.Z({});r.ZP.config.productionTip=!1,new r.ZP({vuetify:$,render:e=>e(T)}).$mount("#app")}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,r,n,o){if(!r){var s=1/0;for(c=0;c<e.length;c++){r=e[c][0],n=e[c][1],o=e[c][2];for(var i=!0,l=0;l<r.length;l++)(!1&o||s>=o)&&Object.keys(a.O).every((function(e){return a.O[e](r[l])}))?r.splice(l--,1):(i=!1,o<s&&(s=o));if(i){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,n,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,o,s=r[0],i=r[1],l=r[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(l)var c=l(a)}for(t&&t(r);d<s.length;d++)o=s[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},r=self["webpackChunkzoho_app"]=self["webpackChunkzoho_app"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(3237)}));r=a.O(r)})();
//# sourceMappingURL=app.3be295fe.js.map
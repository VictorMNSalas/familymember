(function(){"use strict";var e={8217:function(e,t,a){var s=a(144),i=a(998),n=a(3059),r=function(){var e=this,t=e._self._c;return t(i.Z,[t(n.Z,[t("HeaderApp"),e.familyMembers.length<1?t("ACaseOnly",{attrs:{leadData:e.leadData,Matter_ID:e.Matter_ID,Matter_Client_Number:e.Matter_Client_Number,id_lead:e.id_lead}}):t("FormFamilyVue",{attrs:{Matter_ID:e.Matter_ID,Matter_Client_Number:e.Matter_Client_Number,id_lead:e.id_lead,familyData:e.familyMembers}})],1)],1)},o=[],l=(a(7658),a(6072)),d=a(4324),c=function(){var e=this,t=e._self._c;return t(l.Z,{attrs:{color:"blue",density:"compact"}},[t("div",{attrs:{id:"header"}},[t("h1",{staticClass:"title"},[e._v("Retainers")]),t(d.Z,{attrs:{id:"close_icon"},on:{click:function(t){return e.closeWisget()}}},[e._v(" "+e._s(e.CloseIcon))])],1)])},m=[],u=a(5317),p={components:{},data(){return{}},computed:{CloseIcon(){return u.UEB}},methods:{closeWisget(){ZOHO.CRM.UI.Popup.close().then((function(e){console.log(e)}))}}},h=p,f=a(1001),v=(0,f.Z)(h,c,m,!1,null,null,null),_=v.exports,D=a(1653),b=a(4562),g=a(266),C=a(2150),y=a(5125),Z=a(3305),I=a(1713),N=a(2405),M=a(4068),w=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"container"}},[e.pageLoader?t(y.Z,{on:{submit:function(e){e.preventDefault()}}},[t(C.Z,{staticClass:"spacing-playground mt-5"},[e.alert?t(D.Z,{staticClass:"alert",attrs:{text:"",type:"info",variant:"tonal"}},[e._v("New record have been successfully created in the Cases/Retainers module. ")]):e._e(),e.error?t(D.Z,{staticClass:"alert",attrs:{text:"",type:"error",variant:"tonal"}},[e._v("Erroneous information has been found added in the Fee or Initial Deposit field. ")]):e._e(),e.warning?t(D.Z,{staticClass:"alert",attrs:{text:"",type:"warning",variant:"tonal"}},[e._v("There are unanswered fields, please enter the complete information to proceed Deposit field. ")]):e._e(),t(I.Z,[t(g.Z,{attrs:{cols:"12",md:"2"}},[t(M.Z,{attrs:{label:"Service Type",required:""},model:{value:e.service,callback:function(t){e.service=t},expression:"service"}})],1),t(g.Z,{attrs:{cols:"12",md:"2"}},[t(N.Z,{attrs:{label:"Sub Department",items:e.department},model:{value:e.Department,callback:function(t){e.Department=t},expression:"Department"}})],1),t(g.Z,{attrs:{cols:"12",md:"2"}},[t(M.Z,{attrs:{label:"Name",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t(g.Z,{attrs:{cols:"12",md:"2"}},[t(M.Z,{attrs:{label:"Phone",required:""},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),t(g.Z,{attrs:{cols:" 12",md:"2"}},[t(M.Z,{attrs:{label:"Inicial Deposit",rules:e.numeroRules,required:""},on:{change:e.depositCorrect},model:{value:e.deposit,callback:function(t){e.deposit=t},expression:"deposit"}})],1),t(g.Z,{attrs:{cols:"12",md:"2"}},[t(M.Z,{attrs:{label:"Fee",required:"",rules:e.numeroRules},on:{change:e.feeCorrect},model:{value:e.fee,callback:function(t){e.fee=t},expression:"fee"}})],1)],1)],1),t("div",{attrs:{id:"btns"}},[t(b.Z,{staticClass:"spacing-playground ma-3",attrs:{size:"x-large"},on:{click:function(t){return e.createRecord()}}},[e.loader?t(Z.Z,{attrs:{indeterminate:"",size:25}}):t("p",[e._v("Submit")])],1)],1)],1):t("div",{attrs:{id:"load"}},[t(Z.Z,{attrs:{id:"loaderPage",indeterminate:"",size:70}})],1)],1)},P=[],O={data(){return{name:"",phone:"",address:"",service:"",fee:"",deposit:"",department:[],Department:"",depC:"",depI:"",alert:!1,warning:!1,error:!1,loader:!1,pageLoader:!1}},props:{leadData:Array,id_lead:Number,Matter_Client_Number:Number,Matter_ID:Number},computed:{numeroRules(){return[e=>!!e||"This field is required",e=>/^[0-9]*$/.test(e)||"Only numbers allowed"]}},methods:{assignInfo(){this.leadData.length>0&&(console.log("Se asignan los valores de los campos: ",this.leadData[0].name),this.name=this.leadData[0].name,this.phone=this.leadData[0].mobile,this.service=this.leadData[0].service,this.address=this.leadData[0].address,this.pageLoader=(0,s.iH)(!0),this.subDepartment())},subDepartment(){console.log(this.name,this.phone,this.service,this.address),"Immigration"==this.service?(this.department=[],this.department.push("EOIR - Undetained","USCIS - U-Cert","USCIS - Petitions","SIJS","FOIA")):"Criminal"==this.service?(this.department=[],this.department.push("Post Conviction - Pre Filing","Post Conviction - MTV","Post Conviction - Petitions","Post Conviction - Investigations","Post Conviction - Assessments","Misdemeanors","Felonies")):this.department=[]},async createRecord(){const e=Number(this.fee),t=Number(this.deposit);if("Criminal"==this.service?(this.depC=this.Department,this.depI=""):"Immigration"==this.service&&(this.depI=this.Department,this.depC=""),""!=(this.phone&&this.fee&&this.deposit&&this.name&&this.service&&this.Department))if(isNaN(e)||isNaN(t))this.error=(0,s.iH)(!0),setTimeout((()=>{this.error=(0,s.iH)(!1)}),3e3);else{this.loader=(0,s.iH)(!0);let e=`${this.Matter_Client_Number} - 1`;const t=this;ZOHO.CRM.API.insertRecord({Entity:"Deals",APIData:{Client_Name:this.id_lead,Stage:"Open",Deal_Name:e,Name1:this.name,Matter:this.Matter_ID,Service_Type:this.service,Criminal_Department:this.depC,Immigrant_Department:this.depI,Adress:this.address,Phone:this.phone,Fee:this.fee,Initial_Deposit:this.deposit}}).then((function(e){console.log(e),t.alertView(e)})).catch((function(e){console.error(e)}))}else this.warning=(0,s.iH)(!0),setTimeout((()=>{this.warning=(0,s.iH)(!1)}),3e3)},alertView(){this.alert=(0,s.iH)(!0),setTimeout((()=>{this.deleteData(),this.alert=(0,s.iH)(!1),this.loader=(0,s.iH)(!1)}),3e3)},deleteData(){this.name="",this.phone="",this.addres="",this.service="",this.fee="0",this.deposit="0",this.department=[]}},mounted(){console.log("espera 5 seg"),setTimeout((()=>{this.assignInfo(),console.log("compoenent montado")}),5e3)}},R=O,x=(0,f.Z)(R,w,P,!1,null,null,null),S=x.exports,F=function(){var e=this,t=e._self._c;return t(y.Z,{on:{submit:function(e){e.preventDefault()}}},[t(C.Z,{staticClass:"spacing-playground mt-5"},[e.alert?t(D.Z,{staticClass:"alert",attrs:{text:"",type:"info",variant:"tonal"}},[e._v("New record have been successfully created in the Cases/Retainers module. ")]):e._e(),e.error?t(D.Z,{staticClass:"alert",attrs:{text:"",type:"error",variant:"tonal"}},[e._v("Erroneous information has been found added in the Fee or Initial Deposit field. ")]):e._e(),e.warning?t(D.Z,{staticClass:"alert",attrs:{text:"",type:"warning",variant:"tonal"}},[e._v("There are unanswered fields, please enter the complete information to proceed Deposit field. ")]):e._e(),e.componentes.length<=0?t("h3",[e._v("To enter new data, please click on the (âž•) button.")]):e._e(),e._l(e.componentes[0],(function(a,s){return t("div",{key:s,attrs:{id:"row"}},[t("RowForm",{attrs:{familyData:e.familyInfo},on:{los_valores:e.getDataForm,status_alerts:e.statusAlerts}})],1)}))],2),t("div",{attrs:{id:"btns"}},[t("AddRow",{on:{el_arreglo:e.onResults}}),t(b.Z,{staticClass:"spacing-playground ma-3",attrs:{size:"x-large"},on:{click:function(t){return e.createRecord()}}},[e.loader?t(Z.Z,{attrs:{indeterminate:"",size:25}}):t("p",[e._v("Submit")])],1)],1)],1)},A=[],k=function(){var e=this,t=e._self._c;return t(g.Z,[t(b.Z,{attrs:{size:"x-large"},on:{click:e.duplicarComponente}},[e._v("+")])],1)},H=[],T={data(){return{componentes:[]}},methods:{duplicarComponente(){const e="RowForm";this.componentes.push(e),console.log(`componentes ${this.componentes}`),this.$emit("el_arreglo",this.componentes)}}},E=T,$=(0,f.Z)(E,k,H,!1,null,null,null),q=$.exports,U=function(){var e=this,t=e._self._c;return t(I.Z,[t(g.Z,{attrs:{cols:"12",md:"2"}},[t(N.Z,{attrs:{label:"Service Type",items:["Immigration","Criminal"]},on:{change:function(t){return e.subDepartment(t)}},model:{value:e.service,callback:function(t){e.service=t},expression:"service"}})],1),t(g.Z,{attrs:{cols:"12",md:"2"}},[t(N.Z,{attrs:{label:"Sub Department",items:e.department},model:{value:e.Department,callback:function(t){e.Department=t},expression:"Department"}})],1),t(g.Z,{attrs:{cols:"12",md:"2"}},[t(N.Z,{attrs:{label:"Name",items:e.Firstname},on:{change:function(t){return e.data(t)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t(g.Z,{attrs:{cols:"12",md:"2"}},[t(M.Z,{attrs:{label:"Phone",counter:12,required:""},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),t(g.Z,{attrs:{cols:" 12",md:"2"}},[t(M.Z,{attrs:{label:"Inicial Deposit",rules:e.numeroRules,required:""},on:{change:e.depositCorrect},model:{value:e.deposit,callback:function(t){e.deposit=t},expression:"deposit"}})],1),t(g.Z,{attrs:{cols:"12",md:"2"}},[t(M.Z,{attrs:{label:"Fee",required:"",rules:e.numeroRules},on:{change:e.feeCorrect},model:{value:e.fee,callback:function(t){e.fee=t},expression:"fee"}})],1)],1)},V=[],j={icons:{defaultSet:"mdi"},name:"RowForm",components:{},props:{familyData:Array},data(){return{Firstname:"",name:"",phone:"",address:"",service:"",fee:"",deposit:"",Department:"",DepartmentC:"",DepartmentI:"",department:[],familyDataCompleted:[],outData:[]}},computed:{numeroRules(){return[e=>!!e||"This field is required",e=>/^[0-9]*$/.test(e)||"Only numbers allowed"]}},methods:{feeCorrect(){this.dataRowGet()},depositCorrect(){this.dataRowGet()},getData(){let e=[];this.familyData[0].forEach((t=>{t.forEach((t=>{let a=t.Firts_Name,s=t.Last_Name,i=t.Address,n=t.Phone,r=`${a} ${s}`;e.push(r),this.familyDataCompleted.push({fullName:r,addres:i,phone:n})}))})),this.Firstname=e},data(e){this.familyDataCompleted.forEach((t=>{t.fullName==e&&(this.phone=t.phone,this.address=t.addres)}))},subDepartment(e){"Immigration"==e?(this.department=[],this.department.push("EOIR - Undetained","USCIS - U-Cert","USCIS - Petitions","SIJS","FOIA")):"Criminal"==e&&(this.department=[],this.department.push("Post Conviction - Pre Filing","Post Conviction - MTV","Post Conviction - Petitions","Post Conviction - Investigations","Post Conviction - Assessments","Misdemeanors","Felonies"))},dataRowGet(){const e=Number(this.fee),t=Number(this.deposit);if("Criminal"==this.service?(this.DepartmentC=this.Department,this.DepartmentI=""):"Immigration"==this.service&&(this.DepartmentI=this.Department,this.DepartmentC=""),""!=(this.phone&&this.fee&&this.deposit&&this.name&&this.service&&this.Department)&&12==this.phone.length&&!isNaN(e)&&!isNaN(t)){const e={name:this.name,service:this.service,depC:this.DepartmentC,depI:this.DepartmentI,addres:this.address,phone:this.phone,fee:this.fee,deposit:this.deposit};this.$emit("los_valores",e),this.feeValidation=(0,s.iH)(!1),this.depositValidation=(0,s.iH)(!1)}}},mounted(){this.getData()},updated(){this.dataRowGet()}},z=j,L=(0,f.Z)(z,U,V,!1,null,null,null),G=L.exports,J={components:{RowForm:G,AddRow:q},props:{familyData:Array,id_lead:Number,Matter_Client_Number:Number,Matter_ID:Number},data(){return{componentes:[],familyInfo:[],formData:[],data:"",alert:!1,warning:!1,error:!1,loader:!1}},methods:{pushData(){this.familyInfo.push(this.familyData)},onResults(e){this.componentes.push(e)},getDataForm(e){this.formData.push(e)},statusAlerts(e){console.log(e)},async createRecord(){this.loader=(0,s.iH)(!0),this.formData.forEach(((e,t)=>{t+=1,this.data=e;let a=`${this.Matter_Client_Number} - ${t}`;const s=this;ZOHO.CRM.API.insertRecord({Entity:"Deals",APIData:{Client_Name:this.id_lead,Stage:"Open",Deal_Name:a,Name1:e.name,Matter:this.Matter_ID,Service_Type:e.service,Criminal_Department:e.depC,Immigrant_Department:e.depI,Adress:e.addres,Phone:e.phone,Fee:e.fee,Initial_Deposit:e.deposit}}).then((function(e){console.log(e),s.alertView(e)})).catch((function(e){console.error(e)}))}))},alertView(){this.loader=(0,s.iH)(!1),this.alert=(0,s.iH)(!0),this.deleteData(),setTimeout((()=>{this.alert=(0,s.iH)(!1)}),3e3)},deleteData(){this.componentes=[],this.familyInfo=[],this.formData=[],this.data=""}},mounted(){this.pushData()},computed:{}},W=J,B=(0,f.Z)(W,F,A,!1,null,null,null),K=B.exports,Q={name:"App",components:{FormFamilyVue:K,HeaderApp:_,ACaseOnly:S},data:()=>({familyMembers:[],id_lead:"",Matter_Client_Number:"",Matter_ID:"",leadData:[]}),mounted(){ZOHO.embeddedApp.on("PageLoad",(async e=>{const t=e.EntityId,a=e.Entity;this.id_lead=t;const s=await ZOHO.CRM.API.getRecord({Entity:a,RecordID:t});if(s.data[0].Family_Members.length>0)this.familyMembers.push(s.data[0].Family_Members);else{const e={name:s.data[0].Last_Name,service:s.data[0].Service_Type,mobile:s.data[0].Mobile,address:s.data[0].Address_Line_1};this.leadData.push(e)}this.Matter_Client_Number=s.data[0].Matter_Client_Number,this.Matter_ID=s.data[0].Account_Name,console.log("Matter: ",this.Matter_ID.id)})),ZOHO.embeddedApp.init()}},X=Q,Y=(0,f.Z)(X,r,o,!1,null,null,null),ee=Y.exports,te=a(1705);s.ZP.use(te.Z);var ae=new te.Z({});s.ZP.config.productionTip=!1,new s.ZP({vuetify:ae,render:e=>e(ee)}).$mount("#app")}},t={};function a(s){var i=t[s];if(void 0!==i)return i.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,s,i,n){if(!s){var r=1/0;for(c=0;c<e.length;c++){s=e[c][0],i=e[c][1],n=e[c][2];for(var o=!0,l=0;l<s.length;l++)(!1&n||r>=n)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(o=!1,n<r&&(r=n));if(o){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[s,i,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,n,r=s[0],o=s[1],l=s[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(l)var c=l(a)}for(t&&t(s);d<r.length;d++)n=r[d],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},s=self["webpackChunkzoho_app"]=self["webpackChunkzoho_app"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(8217)}));s=a.O(s)})();
//# sourceMappingURL=app.1f83f213.js.map